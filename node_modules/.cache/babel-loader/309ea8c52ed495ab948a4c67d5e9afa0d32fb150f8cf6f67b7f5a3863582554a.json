{"ast":null,"code":"// src/components/events/EventDetails.js\nimport React,{useState}from'react';import{Modal}from'../system/Modal';import{Card,CardContent}from'../ui/Card';import{LocationDetailsCard}from'./LocationSystem';import{validateTemporaryToken}from'../../utils/crypto';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function ParticipantCount(_ref){let{current,max,waitlist=0}=_ref;const percentFull=current/max*100;return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400\",children:\"Participants\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-white\",children:[current,\" / \",max]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"h-2 bg-gray-700 rounded-full overflow-hidden\",children:/*#__PURE__*/_jsx(\"div\",{className:`h-full rounded-full transition-all duration-500 ${percentFull>=90?'bg-orange-500':percentFull>=70?'bg-orange-400':'bg-orange-300'}`,style:{width:`${percentFull}%`}})}),waitlist>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-orange-400\",children:[waitlist,\" on waitlist\"]})]});}function EventTiming(_ref2){let{event}=_ref2;const eventDate=new Date(event.date);const today=new Date();const daysUntil=Math.ceil((eventDate-today)/(1000*60*60*24));return/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-800 p-3 rounded text-orange-500\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-clock text-xl\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-white\",children:eventDate.toLocaleDateString('en-US',{weekday:'long',month:'long',day:'numeric'})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-400\",children:[event.time,\" (\",event.duration,\" minutes)\"]})]})]}),daysUntil>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 text-sm text-orange-300\",children:[daysUntil,\" days until event\"]})]})})});}function RequirementsList(_ref3){let{requirements}=_ref3;const reqList=requirements.split('\\n').filter(Boolean);return/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:reqList.map((req,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-3 text-gray-300\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check-circle text-orange-500 mt-1\"}),/*#__PURE__*/_jsx(\"span\",{children:req})]},index))});}function EventDetailsModal(_ref4){var _event$waitlist;let{isOpen,onClose,event}=_ref4;const[isParticipant,setIsParticipant]=useState(()=>{return validateTemporaryToken(localStorage.getItem(`event_${event.id}_token`),event.id);});return/*#__PURE__*/_jsx(Modal,{isOpen:isOpen,onClose:onClose,title:event.title,size:\"lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(EventTiming,{event:event}),/*#__PURE__*/_jsx(ParticipantCount,{current:event.capacity-event.spotsLeft,max:event.capacity,waitlist:((_event$waitlist=event.waitlist)===null||_event$waitlist===void 0?void 0:_event$waitlist.length)||0}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-orange-300\",children:\"Event Details\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-300\",children:event.description}),event.requirements&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-white mb-3\",children:\"Requirements\"}),/*#__PURE__*/_jsx(RequirementsList,{requirements:event.requirements})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(LocationDetailsCard,{event:event,isParticipant:isParticipant}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-4\",children:isParticipant?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"flex-1 bg-orange-500 hover:bg-orange-600 text-white  px-6 py-3 rounded-xl transition-colors\",children:\"View Signal Group\"}),/*#__PURE__*/_jsx(\"button\",{className:\"px-6 py-3 border border-orange-500 text-orange-500  rounded-xl hover:bg-orange-500/10 transition-colors\",children:\"Cancel RSVP\"})]}):/*#__PURE__*/_jsx(\"button\",{className:\"flex-1 bg-orange-500 hover:bg-orange-600 text-white  px-6 py-3 rounded-xl transition-colors\",children:event.spotsLeft>0?'RSVP Now':'Join Waitlist'})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-400\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-shield-alt\"}),\"Privacy protected:\"]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"mt-2 space-y-1 pl-6 list-disc\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"Location details shared via Signal\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Anonymous participation\"}),/*#__PURE__*/_jsx(\"li\",{children:\"No personal data stored\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Auto-delete after event\"})]})]})]})]})});}export default EventDetailsModal;","map":{"version":3,"names":["React","useState","Modal","Card","CardContent","LocationDetailsCard","validateTemporaryToken","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ParticipantCount","_ref","current","max","waitlist","percentFull","className","children","style","width","EventTiming","_ref2","event","eventDate","Date","date","today","daysUntil","Math","ceil","toLocaleDateString","weekday","month","day","time","duration","RequirementsList","_ref3","requirements","reqList","split","filter","Boolean","map","req","index","EventDetailsModal","_ref4","_event$waitlist","isOpen","onClose","isParticipant","setIsParticipant","localStorage","getItem","id","title","size","capacity","spotsLeft","length","description"],"sources":["/home/elysia/dancingdragons/src/components/events/EventDetails.js"],"sourcesContent":["// src/components/events/EventDetails.js\nimport React, { useState } from 'react';\nimport { Modal } from '../system/Modal';\nimport { Card, CardContent } from '../ui/Card';\nimport { LocationDetailsCard } from './LocationSystem';\nimport { validateTemporaryToken } from '../../utils/crypto';\n\nfunction ParticipantCount({ current, max, waitlist = 0 }) {\n  const percentFull = (current / max) * 100;\n  \n  return (\n    <div className=\"space-y-2\">\n      <div className=\"flex items-center justify-between text-sm\">\n        <span className=\"text-gray-400\">Participants</span>\n        <span className=\"text-white\">{current} / {max}</span>\n      </div>\n      <div className=\"h-2 bg-gray-700 rounded-full overflow-hidden\">\n        <div \n          className={`h-full rounded-full transition-all duration-500 ${\n            percentFull >= 90 ? 'bg-orange-500' :\n            percentFull >= 70 ? 'bg-orange-400' : 'bg-orange-300'\n          }`}\n          style={{ width: `${percentFull}%` }}\n        />\n      </div>\n      {waitlist > 0 && (\n        <div className=\"text-sm text-orange-400\">\n          {waitlist} on waitlist\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction EventTiming({ event }) {\n  const eventDate = new Date(event.date);\n  const today = new Date();\n  const daysUntil = Math.ceil((eventDate - today) / (1000 * 60 * 60 * 24));\n  \n  return (\n    <div className=\"space-y-4\">\n      <Card>\n        <CardContent>\n          <div className=\"flex items-center gap-4\">\n            <div className=\"bg-gray-800 p-3 rounded text-orange-500\">\n              <i className=\"fas fa-clock text-xl\"></i>\n            </div>\n            <div>\n              <div className=\"text-white\">\n                {eventDate.toLocaleDateString('en-US', {\n                  weekday: 'long',\n                  month: 'long',\n                  day: 'numeric'\n                })}\n              </div>\n              <div className=\"text-gray-400\">\n                {event.time} ({event.duration} minutes)\n              </div>\n            </div>\n          </div>\n          {daysUntil > 0 && (\n            <div className=\"mt-3 text-sm text-orange-300\">\n              {daysUntil} days until event\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n\nfunction RequirementsList({ requirements }) {\n  const reqList = requirements.split('\\n').filter(Boolean);\n  \n  return (\n    <div className=\"space-y-2\">\n      {reqList.map((req, index) => (\n        <div key={index} className=\"flex items-start gap-3 text-gray-300\">\n          <i className=\"fas fa-check-circle text-orange-500 mt-1\"></i>\n          <span>{req}</span>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nfunction EventDetailsModal({ isOpen, onClose, event }) {\n  const [isParticipant, setIsParticipant] = useState(() => {\n    return validateTemporaryToken(localStorage.getItem(`event_${event.id}_token`), event.id);\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      title={event.title}\n      size=\"lg\"\n    >\n      <div className=\"grid md:grid-cols-2 gap-6\">\n        {/* Left Column */}\n        <div className=\"space-y-6\">\n          <EventTiming event={event} />\n          \n          <ParticipantCount \n            current={event.capacity - event.spotsLeft}\n            max={event.capacity}\n            waitlist={event.waitlist?.length || 0}\n          />\n\n          <Card>\n            <CardContent className=\"space-y-4\">\n              <h3 className=\"text-lg font-semibold text-orange-300\">\n                Event Details\n              </h3>\n              <p className=\"text-gray-300\">\n                {event.description}\n              </p>\n              \n              {event.requirements && (\n                <div className=\"mt-6\">\n                  <h4 className=\"font-medium text-white mb-3\">Requirements</h4>\n                  <RequirementsList requirements={event.requirements} />\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Right Column */}\n        <div className=\"space-y-6\">\n          <LocationDetailsCard \n            event={event}\n            isParticipant={isParticipant}\n          />\n\n          {/* Action Buttons */}\n          <div className=\"flex gap-4\">\n            {isParticipant ? (\n              <>\n                <button className=\"flex-1 bg-orange-500 hover:bg-orange-600 text-white \n                                 px-6 py-3 rounded-xl transition-colors\">\n                  View Signal Group\n                </button>\n                <button className=\"px-6 py-3 border border-orange-500 text-orange-500 \n                                 rounded-xl hover:bg-orange-500/10 transition-colors\">\n                  Cancel RSVP\n                </button>\n              </>\n            ) : (\n              <button className=\"flex-1 bg-orange-500 hover:bg-orange-600 text-white \n                               px-6 py-3 rounded-xl transition-colors\">\n                {event.spotsLeft > 0 ? 'RSVP Now' : 'Join Waitlist'}\n              </button>\n            )}\n          </div>\n\n          {/* Privacy Notice */}\n          <div className=\"text-sm text-gray-400\">\n            <p className=\"flex items-center gap-2\">\n              <i className=\"fas fa-shield-alt\"></i>\n              Privacy protected:\n            </p>\n            <ul className=\"mt-2 space-y-1 pl-6 list-disc\">\n              <li>Location details shared via Signal</li>\n              <li>Anonymous participation</li>\n              <li>No personal data stored</li>\n              <li>Auto-delete after event</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default EventDetailsModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}